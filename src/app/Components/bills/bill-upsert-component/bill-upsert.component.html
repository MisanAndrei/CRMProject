<form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
  <div>
    <label for="transactionType">Transaction Type</label>
    <select id="transactionType" formControlName="transactionType">
      <option value="purchase">Purchase</option>
      <option value="sale">Sale</option>
    </select>
  </div>
  
  <div>
    <label for="customer">Customer</label>
    <select id="customer" formControlName="customer" (change)="onCustomerChange($event)">
      <option value="">Select Customer</option>
      <option *ngFor="let customer of customers" [value]="customer.id">
        {{ customer.name }}
      </option>
    </select>
  </div>

  <div>
    <label for="customerName">Customer Name</label>
    <input id="customerName" formControlName="customerName" type="text" [disabled]="!transactionForm.get('customerName')?.enabled">
  </div>

  <div>
    <label for="customerCui">Customer CUI</label>
    <input id="customerCui" formControlName="customerCui" type="text" [disabled]="!transactionForm.get('customerCui')?.enabled">
  </div>

  <div>
    <label for="customerCity">Customer City</label>
    <input id="customerCity" formControlName="customerCity" type="text" [disabled]="!transactionForm.get('customerCity')?.enabled">
  </div>
  
  <div>
    <label for="date">Date</label>
    <input id="date" formControlName="date" type="date">
  </div>
  
  <div>
    <label for="items">Items</label>
    <div formArrayName="items">
      <div *ngFor="let item of items.controls; let i = index">
        <div [formGroupName]="i">
          <input formControlName="description" placeholder="Description" type="text">
          <input formControlName="quantity" placeholder="Quantity" type="number">
          <input formControlName="price" placeholder="Price" type="number">
          <select formControlName="tax">
            <option *ngFor="let tax of taxOptions" [value]="tax.id">
              {{ tax.description }}
            </option>
          </select>
          <button type="button" (click)="removeItem(i)">Remove</button>
        </div>
      </div>
    </div>
    <button type="button" (click)="addItem()">Add Item</button>
  </div>
  
  <button type="submit">{{ isPurchase() ? 'Create Purchase' : 'Create Sale' }}</button>
</form>